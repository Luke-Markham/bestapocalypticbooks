(this.webpackJsonpbestapocalypticbooks=this.webpackJsonpbestapocalypticbooks||[]).push([[4],{103:function(e,t,n){"use strict";var a=n(12),r=n.n(a),c=n(21),o=n(33),u=n(0),i=n.n(u),s=n(20),l=n(76),f=n(82),h=n(78),p=n(81),m=n(89),b=n.n(m),v=n(80),O=n.n(v),E=function(e){var t=e.handleSearchResultSelection,n=e.result,a=e.index,r=e.cursorPosition,c=i.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)},onKeyDown:function(e){console.log(e)}},n.title," - ",n.author," ",n.series&&n.series.name.length>0?"("+n.series.name+")":null),o=i.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)}},n.author," (Author)"),u=i.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)}},n.series," (Series)"),s=i.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)}},n.genre," (genre)");return i.a.createElement(i.a.Fragment,null,"genre"===n.typeOfQuery?s:"author"===n.typeOfQuery?o:"series"===n.typeOfQuery?u:c)},g=n(19);t.a=Object(s.b)((function(e){var t=e.search;return{searchResults:t.searchResults,isSearching:t.isSearching,isSearchBarOpen:t.isSearchBarOpen}}),(function(e){return{toggleSearchBar:function(){return e(Object(f.d)())},fetchSearchResultsAsync:function(t){return e(Object(f.a)(t))},clearSearchResults:function(t){return e(Object(f.c)(t))},setStartSearching:function(){return e(Object(f.b)())},clearPreviousBookPageBookState:function(t){return e(Object(h.b)(t))},clearPreviousBookPageRelatedBooksState:function(t){return e(Object(h.d)(t))},pushBookToBookPageState:function(t){return e(Object(h.b)(t))},clearPreviousAuthorPageBooksState:function(t){return e(Object(p.b)(t))},pushBooksToAuthorPageBooksState:function(t){return e(Object(p.b)(t))}}}))((function(e){var t=e.toggleSearchBar,n=e.isSearchBarOpen,a=e.setStartSearching,s=e.fetchSearchResultsAsync,f=e.isSearching,h=e.searchResults,p=e.clearSearchResults,m=e.clearPreviousBookPageBookState,v=e.clearPreviousBookPageRelatedBooksState,d=e.pushBookToBookPageState,y=e.clearPreviousAuthorPageBooksState,S=e.pushBooksToAuthorPageBooksState,k=Object(l.g)(),_=Object(u.useState)(""),C=Object(o.a)(_,2),j=C[0],A=C[1],B=Object(u.useState)(),R=Object(o.a)(B,2),w=R[0],T=R[1],N=Object(u.useState)(-1),P=Object(o.a)(N,2),H=P[0],K=P[1],x=function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(null);case 2:return e.next=4,v(null);case 4:k.push("/bestapocalypticbooks/books/".concat(Object(g.c)(n.title))),d(n),t(),A("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(r.a.mark((function e(n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(null);case 2:a=[],c=h.filter((function(e){return a.push(e.src),e.author===n.author&&void 0!==e.title})),Object(g.a)(a),k.push("/bestapocalypticbooks/authors/".concat(Object(g.c)(n.author))),S(c),t(),A("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){"author"===e.typeOfQuery?F(e):"series"===e.typeOfQuery?console.log("series:",e):"genre"===e.typeOfQuery?console.log("genre:",e):x(e)};function G(e){var t;j.length>0&&h.length>0&&("ArrowDown"===e.key||"ArrowUp"===e.key)?(e.preventDefault(),"ArrowDown"===(t=e.key)&&H!==h.length-1?K(H+1):"ArrowUp"===t&&0!==H&&K(H-1)):j.length>0&&h.length>0&&"Enter"===e.key?U(h[H]):(clearTimeout(w),j?T(setTimeout((function(){s(j)}),400)):p(!1))}return i.a.createElement("div",{className:"search-container"},i.a.createElement("div",{className:"search-bar-container"},n?null:i.a.createElement("div",{onClick:function(){return t()},className:"search-bar-icon-container ".concat(n?"search-bar-icon-bkg":"")},i.a.createElement("img",{src:b.a,alt:"Search Icon",className:"search-bar-search-icon"})),i.a.createElement("input",{className:"search-bar-input ".concat(n?"search-bar-input-open":""),type:"text",placeholder:"Titles, Authors, Series, Genre",onChange:function(e){return function(e){A(e.target.value),a()}(e)},onKeyUp:function(e){G(e)},value:j}),n?i.a.createElement("div",{onClick:function(){t(),A("")},className:"search-bar-icon-container ".concat(n?"search-bar-icon-bkg":"")},i.a.createElement("img",{src:O.a,alt:"Close Icon",className:"search-bar-search-close ".concat(n?"search-bar-search-close-show":"")})):null),i.a.createElement("div",{className:"search-results-container"},j&&f?i.a.createElement("span",{className:"search-searching"},"Searching..."):j&&!h?i.a.createElement("span",{className:"search-no-results"},"No Results"):j&&h.length>0?h.map((function(e,t){return i.a.createElement(E,{cursorPosition:H,handleSearchResultSelection:U,result:e,key:t,index:t})})):null))}))},111:function(e,t,n){e.exports=n.p+"static/media/hamburgerMenu.ffcf6dad.svg"},140:function(e,t,n){"use strict";n.r(t);var a=n(33),r=n(0),c=n.n(r),o=n(76),u=n(20),i=n(86),s=n(82),l=n(77),f=n(87),h=n(103),p=n(111),m=n.n(p),b=n(80),v=n.n(b);t.default=Object(u.b)((function(e){return{isSearchBarOpen:e.search.isSearchBarOpen}}),(function(e){return{saveNavHeightValue:function(t){return e(Object(i.a)(t))},toggleSearchBar:function(){return e(Object(s.d)())}}}))((function(e){var t=e.saveNavHeightValue,n=(e.toggleSearchBar,e.isSearchBarOpen),r=c.a.useState(!1),u=Object(a.a)(r,2),i=u[0],s=u[1],p=c.a.useRef(null),b=Object(o.h)(),O=c.a.useState(!1),E=Object(a.a)(O,2),g=E[0],d=E[1];return c.a.useEffect((function(){return("/home"===b.pathname||b.pathname.includes("/books"))&&setTimeout((function(){console.log(p.current.clientHeight),t(p.current.clientHeight)}),250),window.addEventListener("scroll",(function(){0!==window.scrollY?d(!0):d(!1)})),function(){window.removeEventListener("scroll",null)}}),[b]),c.a.createElement("nav",{className:"".concat(g||i||n?"mobile-nav nav-scroll-bkg":"mobile-nav"),ref:p},c.a.createElement("div",{className:"mobile-nav-top-bar-container"},c.a.createElement(f.a,null),c.a.createElement("div",{className:"hamburger-and-search-icon-container"},i?null:c.a.createElement(h.a,null),i?c.a.createElement("img",{src:v.a,className:"mobile-nav-close-icon",alt:"close navigation menu",onClick:function(){return s(!1)}}):n?null:c.a.createElement("img",{src:m.a,className:"mobile-nav-hamburger-icon",alt:"open navigation menu",onClick:function(){return s(!0)}}))),i?c.a.createElement("div",{className:"mobile-nav-contents-container"},c.a.createElement("ul",null,c.a.createElement(l.a,{onClick:function(){return s(!1)},to:"/bestapocalypticbooks/home"},"Home"),c.a.createElement(l.a,{onClick:function(){return s(!1)},to:"/bestapocalypticbooks/toppicks"},"Top Picks"),c.a.createElement(l.a,{onClick:function(){return s(!1)},to:"/bestapocalypticbooks/about"},"About"),c.a.createElement(l.a,{onClick:function(){return s(!1)},to:"/bestapocalypticbooks/contact"},"Contact"))):null)}))},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(76),r=n(8),c=n(0),o=n.n(c),u=n(9),i=(n(3),n(2)),s=n(6),l=n(7);o.a.Component;o.a.Component;var f=function(e,t){return"function"===typeof e?e(t):e},h=function(e,t){return"string"===typeof e?Object(u.c)(e,null,null,t):e},p=function(e){return e},m=o.a.forwardRef;"undefined"===typeof m&&(m=p);var b=m((function(e,t){var n=e.innerRef,a=e.navigate,r=e.onClick,c=Object(s.a)(e,["innerRef","navigate","onClick"]),u=c.target,l=Object(i.a)({},c,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),a())}});return l.ref=p!==m&&t||n,o.a.createElement("a",l)}));var v=m((function(e,t){var n=e.component,r=void 0===n?b:n,c=e.replace,u=e.to,v=e.innerRef,O=Object(s.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(a.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,a=h(f(u,e.location),e.location),s=a?n.createHref(a):"",b=Object(i.a)({},O,{href:s,navigate:function(){var t=f(u,e.location);(c?n.replace:n.push)(t)}});return p!==m?b.ref=t||v:b.innerRef=v,o.a.createElement(r,b)}))})),O=function(e){return e},E=o.a.forwardRef;"undefined"===typeof E&&(E=O);var g=E((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,c=e.activeClassName,u=void 0===c?"active":c,p=e.activeStyle,m=e.className,b=e.exact,g=e.isActive,d=e.location,y=e.sensitive,S=e.strict,k=e.style,_=e.to,C=e.innerRef,j=Object(s.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(a.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=d||e.location,c=h(f(_,n),n),s=c.pathname,A=s&&s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),B=A?Object(a.f)(n.pathname,{path:A,exact:b,sensitive:y,strict:S}):null,R=!!(g?g(B,n):B),w=R?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(m,u):m,T=R?Object(i.a)({},k,{},p):k,N=Object(i.a)({"aria-current":R&&r||null,className:w,style:T,to:c},j);return O!==E?N.ref=t||C:N.innerRef=C,o.a.createElement(v,N)}))}))},78:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return i}));var a=n(31),r=n(19),c=function(e){return{type:"FETCH_BOOK_PAGE_BOOK_SUCCESS",payload:e}},o=function(e){var t=Object(r.b)(Object(r.d)(e));return function(e){var n;e({type:"FETCH_BOOK_PAGE_BOOK_START"}),a.b.collection("books").doc(t).get().then((function(t){n=!!t.exists&&t.data(),e(c(n))})).catch((function(t){return e({type:"FETCH_BOOK_PAGE_BOOK_FAILURE",payload:t.message})}))}},u=function(e){return{type:"FETCH_BOOK_PAGE_RELATED_BOOKS_SUCCESS",payload:e}},i=function(e){var t=Object(r.d)(e);return function(e){e({type:"FETCH_BOOK_PAGE_RELATED_BOOKS_START"}),a.b.collection("books").where("title","==",t).where("series.name",">","").get().then((function(t){t.forEach((function(t){if(t.exists){var n=t.data().series.name;a.b.collection("books").where("series.name","==",n).get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push(t)})),e(u(n))}))}else e(u(!1))}))})).catch((function(t){return e({type:"FETCH_BOOK_PAGE_RELATED_BOOKS_FAILURE",payload:t})}))}}},80:function(e,t,n){e.exports=n.p+"static/media/close.62bc743b.svg"},81:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(31),r=n(19),c=function(e){return{type:"FETCH_AUTHOR_PAGE_BOOKS_SUCCESS",payload:e}},o=function(e){var t=Object(r.d)(e);return function(e){e({type:"FETCH_AUTHOR_PAGE_BOOKS_START"}),a.b.collection("books").where("author","==",t).get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push(t)})),e(c(n))})).catch((function(t){return e({type:"FETCH_AUTHOR_PAGE_BOOKS_FAILURE",payload:t})}))}}},82:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h}));var a=n(13),r=n(12),c=n.n(r),o=n(21),u=n(31),i=function(){return{type:"TOGGLE_SEARCH_BAR"}},s=function(){return{type:"FETCH_SEARCH_START"}},l=function(e){return{type:"FETCH_SEARCH_SUCCESS",payload:e}},f=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"FETCH_SEARCH__FAILURE",payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return e=e.toLowerCase(),function(t){var n=u.b.collection("books"),r=n.where("author",">=",e).where("author","<=",e+"\uf8ff"),c=n.where("title",">=",e).where("title","<=",e+"\uf8ff"),o=n.where("series.name",">=",e).where("series.name","<=",e+"\uf8ff"),i=n.where("tags","array-contains",e),s=["title","author","series","genre"],h=[];[c,r,o,i].forEach((function(t,n){var r=new Promise((function(r,c){t.get().then((function(t){var o=[],u=[];t.forEach((function(t){var a=t.data();"author"===s[n]?u.includes(a.author)||u.push(a.author):"series"===s[n]?u.includes(a.series.name)||u.push(a.series.name):"genre"===s[n]&&(u.includes(e)||u.push(e)),o.push(a)})),u.forEach((function(e,t){u[t]=Object(a.a)({typeOfQuery:s[n]},s[n],e)}));var i=u.concat(o);r(i),c(new Error("promise failed"))}))})).then();h.push(r)})),Promise.all(h).then((function(e){var n=e.flat();0===n.length&&(n=!1),t(l(n))})).catch((function(e){return t(f(e))}))}}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return{type:"SAVE_NAV_HEIGHT_VALUE",payload:e}}},87:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(76),o=n(88),u=n.n(o);t.a=function(){var e=Object(c.g)();return r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{src:u.a,alt:"logo",className:"logo",onClick:function(){return e.push("/bestapocalypticbooks/home")}}))}},88:function(e,t,n){e.exports=n.p+"static/media/logo.3754652c.svg"},89:function(e,t,n){e.exports=n.p+"static/media/search.21a238ee.svg"}}]);
//# sourceMappingURL=4.52d3fb7e.chunk.js.map