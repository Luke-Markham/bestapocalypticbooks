(this.webpackJsonpbestapocalypticbooks=this.webpackJsonpbestapocalypticbooks||[]).push([[5],{103:function(e,t,n){"use strict";var a=n(12),r=n.n(a),c=n(21),o=n(33),u=n(0),s=n.n(u),i=n(20),l=n(76),f=n(82),h=n(78),p=n(81),b=n(89),v=n.n(b),m=n(80),O=n.n(m),E=function(e){var t=e.handleSearchResultSelection,n=e.result,a=e.index,r=e.cursorPosition,c=s.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)},onKeyDown:function(e){console.log(e)}},n.title," - ",n.author," ",n.series&&n.series.name.length>0?"("+n.series.name+")":null),o=s.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)}},n.author," (Author)"),u=s.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)}},n.series," (Series)"),i=s.a.createElement("span",{className:"search-result ".concat(r===a?"search-result-active":""),onClick:function(){return t(n)}},n.genre," (genre)");return s.a.createElement(s.a.Fragment,null,"genre"===n.typeOfQuery?i:"author"===n.typeOfQuery?o:"series"===n.typeOfQuery?u:c)},d=n(19);t.a=Object(i.b)((function(e){var t=e.search;return{searchResults:t.searchResults,isSearching:t.isSearching,isSearchBarOpen:t.isSearchBarOpen}}),(function(e){return{toggleSearchBar:function(){return e(Object(f.d)())},fetchSearchResultsAsync:function(t){return e(Object(f.a)(t))},clearSearchResults:function(t){return e(Object(f.c)(t))},setStartSearching:function(){return e(Object(f.b)())},clearPreviousBookPageBookState:function(t){return e(Object(h.b)(t))},clearPreviousBookPageRelatedBooksState:function(t){return e(Object(h.d)(t))},pushBookToBookPageState:function(t){return e(Object(h.b)(t))},clearPreviousAuthorPageBooksState:function(t){return e(Object(p.b)(t))},pushBooksToAuthorPageBooksState:function(t){return e(Object(p.b)(t))}}}))((function(e){var t=e.toggleSearchBar,n=e.isSearchBarOpen,a=e.setStartSearching,i=e.fetchSearchResultsAsync,f=e.isSearching,h=e.searchResults,p=e.clearSearchResults,b=e.clearPreviousBookPageBookState,m=e.clearPreviousBookPageRelatedBooksState,g=e.pushBookToBookPageState,y=e.clearPreviousAuthorPageBooksState,S=e.pushBooksToAuthorPageBooksState,k=Object(l.g)(),_=Object(u.useState)(""),A=Object(o.a)(_,2),j=A[0],C=A[1],R=Object(u.useState)(),w=Object(o.a)(R,2),B=w[0],T=w[1],P=Object(u.useState)(-1),H=Object(o.a)(P,2),N=H[0],K=H[1],x=function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(null);case 2:return e.next=4,m(null);case 4:k.push("/bestapocalypticbooks/books/".concat(Object(d.c)(n.title))),g(n),t(),C("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(r.a.mark((function e(n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(null);case 2:a=[],c=h.filter((function(e){return a.push(e.src),e.author===n.author&&void 0!==e.title})),Object(d.a)(a),k.push("/bestapocalypticbooks/authors/".concat(Object(d.c)(n.author))),S(c),t(),C("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){"author"===e.typeOfQuery?F(e):"series"===e.typeOfQuery?console.log("series:",e):"genre"===e.typeOfQuery?console.log("genre:",e):x(e)};function G(e){var t;j.length>0&&h.length>0&&("ArrowDown"===e.key||"ArrowUp"===e.key)?(e.preventDefault(),"ArrowDown"===(t=e.key)&&N!==h.length-1?K(N+1):"ArrowUp"===t&&0!==N&&K(N-1)):j.length>0&&h.length>0&&"Enter"===e.key?U(h[N]):(clearTimeout(B),j?T(setTimeout((function(){i(j)}),400)):p(!1))}return s.a.createElement("div",{className:"search-container"},s.a.createElement("div",{className:"search-bar-container"},n?null:s.a.createElement("div",{onClick:function(){return t()},className:"search-bar-icon-container ".concat(n?"search-bar-icon-bkg":"")},s.a.createElement("img",{src:v.a,alt:"Search Icon",className:"search-bar-search-icon"})),s.a.createElement("input",{className:"search-bar-input ".concat(n?"search-bar-input-open":""),type:"text",placeholder:"Titles, Authors, Series, Genre",onChange:function(e){return function(e){C(e.target.value),a()}(e)},onKeyUp:function(e){G(e)},value:j}),n?s.a.createElement("div",{onClick:function(){t(),C("")},className:"search-bar-icon-container ".concat(n?"search-bar-icon-bkg":"")},s.a.createElement("img",{src:O.a,alt:"Close Icon",className:"search-bar-search-close ".concat(n?"search-bar-search-close-show":"")})):null),s.a.createElement("div",{className:"search-results-container"},j&&f?s.a.createElement("span",{className:"search-searching"},"Searching..."):j&&!h?s.a.createElement("span",{className:"search-no-results"},"No Results"):j&&h.length>0?h.map((function(e,t){return s.a.createElement(E,{cursorPosition:N,handleSearchResultSelection:U,result:e,key:t,index:t})})):null))}))},139:function(e,t,n){"use strict";n.r(t);var a=n(33),r=n(0),c=n.n(r),o=n(76),u=n(20),s=n(86),i=n(77),l=n(87),f=n(103);t.default=Object(u.b)(null,(function(e){return{saveNavHeightValue:function(t){return e(Object(s.a)(t))}}}))((function(e){var t=e.saveNavHeightValue,n=c.a.useState(!1),r=Object(a.a)(n,2),u=r[0],s=r[1],h=c.a.useRef(null),p=Object(o.h)();return c.a.useEffect((function(){return(p.pathname.includes("/home")||p.pathname.includes("/books"))&&setTimeout((function(){console.log(h.current.clientHeight),t(h.current.clientHeight)}),250),window.addEventListener("scroll",(function(){0!==window.scrollY?s(!0):s(!1)})),function(){window.removeEventListener("scroll",null)}}),[p]),c.a.createElement("nav",{className:"".concat(u?"desktop-nav nav-scroll-bkg":"desktop-nav"),ref:h},c.a.createElement(l.a,null),c.a.createElement("ul",null,c.a.createElement(i.a,{to:"/bestapocalypticbooks/home"},"Home"),c.a.createElement(i.a,{to:"/bestapocalypticbooks/toppicks"},"Top Picks"),c.a.createElement(i.a,{to:"/bestapocalypticbooks/about"},"About"),c.a.createElement(i.a,{to:"/bestapocalypticbooks/contact"},"Contact")),c.a.createElement(f.a,null))}))},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(76),r=n(8),c=n(0),o=n.n(c),u=n(9),s=(n(3),n(2)),i=n(6),l=n(7);o.a.Component;o.a.Component;var f=function(e,t){return"function"===typeof e?e(t):e},h=function(e,t){return"string"===typeof e?Object(u.c)(e,null,null,t):e},p=function(e){return e},b=o.a.forwardRef;"undefined"===typeof b&&(b=p);var v=b((function(e,t){var n=e.innerRef,a=e.navigate,r=e.onClick,c=Object(i.a)(e,["innerRef","navigate","onClick"]),u=c.target,l=Object(s.a)({},c,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),a())}});return l.ref=p!==b&&t||n,o.a.createElement("a",l)}));var m=b((function(e,t){var n=e.component,r=void 0===n?v:n,c=e.replace,u=e.to,m=e.innerRef,O=Object(i.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(a.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,a=h(f(u,e.location),e.location),i=a?n.createHref(a):"",v=Object(s.a)({},O,{href:i,navigate:function(){var t=f(u,e.location);(c?n.replace:n.push)(t)}});return p!==b?v.ref=t||m:v.innerRef=m,o.a.createElement(r,v)}))})),O=function(e){return e},E=o.a.forwardRef;"undefined"===typeof E&&(E=O);var d=E((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,c=e.activeClassName,u=void 0===c?"active":c,p=e.activeStyle,b=e.className,v=e.exact,d=e.isActive,g=e.location,y=e.sensitive,S=e.strict,k=e.style,_=e.to,A=e.innerRef,j=Object(i.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(a.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=g||e.location,c=h(f(_,n),n),i=c.pathname,C=i&&i.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),R=C?Object(a.f)(n.pathname,{path:C,exact:v,sensitive:y,strict:S}):null,w=!!(d?d(R,n):R),B=w?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(b,u):b,T=w?Object(s.a)({},k,{},p):k,P=Object(s.a)({"aria-current":w&&r||null,className:B,style:T,to:c},j);return O!==E?P.ref=t||A:P.innerRef=A,o.a.createElement(m,P)}))}))},78:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return s}));var a=n(31),r=n(19),c=function(e){return{type:"FETCH_BOOK_PAGE_BOOK_SUCCESS",payload:e}},o=function(e){var t=Object(r.b)(Object(r.d)(e));return function(e){var n;e({type:"FETCH_BOOK_PAGE_BOOK_START"}),a.b.collection("books").doc(t).get().then((function(t){n=!!t.exists&&t.data(),e(c(n))})).catch((function(t){return e({type:"FETCH_BOOK_PAGE_BOOK_FAILURE",payload:t.message})}))}},u=function(e){return{type:"FETCH_BOOK_PAGE_RELATED_BOOKS_SUCCESS",payload:e}},s=function(e){var t=Object(r.d)(e);return function(e){e({type:"FETCH_BOOK_PAGE_RELATED_BOOKS_START"}),a.b.collection("books").where("title","==",t).where("series.name",">","").get().then((function(t){t.forEach((function(t){if(t.exists){var n=t.data().series.name;a.b.collection("books").where("series.name","==",n).get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push(t)})),e(u(n))}))}else e(u(!1))}))})).catch((function(t){return e({type:"FETCH_BOOK_PAGE_RELATED_BOOKS_FAILURE",payload:t})}))}}},80:function(e,t,n){e.exports=n.p+"static/media/close.62bc743b.svg"},81:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(31),r=n(19),c=function(e){return{type:"FETCH_AUTHOR_PAGE_BOOKS_SUCCESS",payload:e}},o=function(e){var t=Object(r.d)(e);return function(e){e({type:"FETCH_AUTHOR_PAGE_BOOKS_START"}),a.b.collection("books").where("author","==",t).get().then((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push(t)})),e(c(n))})).catch((function(t){return e({type:"FETCH_AUTHOR_PAGE_BOOKS_FAILURE",payload:t})}))}}},82:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h}));var a=n(13),r=n(12),c=n.n(r),o=n(21),u=n(31),s=function(){return{type:"TOGGLE_SEARCH_BAR"}},i=function(){return{type:"FETCH_SEARCH_START"}},l=function(e){return{type:"FETCH_SEARCH_SUCCESS",payload:e}},f=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"FETCH_SEARCH__FAILURE",payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return e=e.toLowerCase(),function(t){var n=u.b.collection("books"),r=n.where("author",">=",e).where("author","<=",e+"\uf8ff"),c=n.where("title",">=",e).where("title","<=",e+"\uf8ff"),o=n.where("series.name",">=",e).where("series.name","<=",e+"\uf8ff"),s=n.where("tags","array-contains",e),i=["title","author","series","genre"],h=[];[c,r,o,s].forEach((function(t,n){var r=new Promise((function(r,c){t.get().then((function(t){var o=[],u=[];t.forEach((function(t){var a=t.data();"author"===i[n]?u.includes(a.author)||u.push(a.author):"series"===i[n]?u.includes(a.series.name)||u.push(a.series.name):"genre"===i[n]&&(u.includes(e)||u.push(e)),o.push(a)})),u.forEach((function(e,t){u[t]=Object(a.a)({typeOfQuery:i[n]},i[n],e)}));var s=u.concat(o);r(s),c(new Error("promise failed"))}))})).then();h.push(r)})),Promise.all(h).then((function(e){var n=e.flat();0===n.length&&(n=!1),t(l(n))})).catch((function(e){return t(f(e))}))}}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return{type:"SAVE_NAV_HEIGHT_VALUE",payload:e}}},87:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(76),o=n(88),u=n.n(o);t.a=function(){var e=Object(c.g)();return r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{src:u.a,alt:"logo",className:"logo",onClick:function(){return e.push("/bestapocalypticbooks/home")}}))}},88:function(e,t,n){e.exports=n.p+"static/media/logo.3754652c.svg"},89:function(e,t,n){e.exports=n.p+"static/media/search.21a238ee.svg"}}]);
//# sourceMappingURL=5.f7baee6f.chunk.js.map